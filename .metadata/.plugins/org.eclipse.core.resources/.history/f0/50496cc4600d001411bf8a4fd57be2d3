package com.laurenelder.movielookup;

import java.io.BufferedInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.os.RemoteException;
import android.util.Log;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

public class DetailActivity extends Activity {
	
	static String tag = "DETAILSACTIVITY";
	ImageView image;
	TextView titleTxt;
	TextView yearTxt;
	TextView directorTxt;
	TextView ratedTxt;
	TextView runtimeTxt;
	TextView genreTxt;
	TextView actorTxt;
	TextView awardTxt;
	TextView scoreTxt;
	TextView plotTxt;
	String imageURL;
	Bitmap moviePoster;
	

	@Override
	protected void onCreate(Bundle savedInstanceState) {
		// TODO Auto-generated method stub
		setContentView(R.layout.detail_layout);
		super.onCreate(savedInstanceState);
		
		titleTxt = (TextView)findViewById(R.id.movieTitle);
		yearTxt = (TextView)findViewById(R.id.movieYear);
		directorTxt = (TextView)findViewById(R.id.movieDirector);
		ratedTxt = (TextView)findViewById(R.id.movieRating);
		runtimeTxt = (TextView)findViewById(R.id.movieRuntime);
		genreTxt = (TextView)findViewById(R.id.movieGenre);
		actorTxt = (TextView)findViewById(R.id.movieActor);
		awardTxt = (TextView)findViewById(R.id.movieAwards);
		scoreTxt = (TextView)findViewById(R.id.movieScore);
		plotTxt = (TextView)findViewById(R.id.moviePlot);
		image = (ImageView)findViewById(R.id.movieImage);
		
		imageURL = getIntent().getExtras().getString("image");
		Log.i(tag, imageURL.toString());
		
//		Drawable poster = LoadImageFromURL(imageURL);
		
		try {
			URL url = new URL(imageURL); 
			moviePoster = BitmapFactory.decodeStream(url.openConnection() .getInputStream());
			image.setImageBitmap(moviePoster);
		} catch (MalformedURLException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		
		titleTxt.setText(getIntent().getExtras().getString("title"));
		yearTxt.setText(getIntent().getExtras().getString("year"));
		directorTxt.setText(getIntent().getExtras().getString("director"));
		ratedTxt.setText(getIntent().getExtras().getString("rated"));
		runtimeTxt.setText(getIntent().getExtras().getString("runtime"));
		genreTxt.setText(getIntent().getExtras().getString("genre"));
		actorTxt.setText(getIntent().getExtras().getString("actors"));
		awardTxt.setText(getIntent().getExtras().getString("awards"));
		scoreTxt.setText(getIntent().getExtras().getString("score"));
		plotTxt.setText(getIntent().getExtras().getString("plot"));
//		image.setImageDrawable(poster);
		
		
//		Toast.makeText(this, getIntent().getExtras().getString("title"), Toast.LENGTH_LONG).show();
//		getIntent().getExtras().getString(key)
	}

/*	public Drawable LoadImageFromURL(String url) {
	    try {
	        InputStream urlInputStream = (InputStream) new URL(url).getContent();
	        Drawable drawableImage = Drawable.createFromStream(urlInputStream, imageURL);
	        return drawableImage;
	    } catch (Exception e) {
	    	Log.i(tag, "Something went wrong loading the image");
	        return null;
	    }
	}*/
}
